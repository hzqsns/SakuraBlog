---
title: 为什么不用C++来开发网页?
excerpt: '' 
author: Sakura
publishDate: '2024-12-07'
coverImage: 'https://pub-07075d3d3f844b7cac01396dfa381361.r2.dev/128127649_p0_master1200.jpg' 
slug: 'frontend-cpp-web'
date: 2024-12-07 12:37:00
tags:
  - 浏览器
category:
  - 前端
---

一直以来笔者对JavaScript感到奇怪，因为当今主流的JavaScript引擎有很多都是由 C++ 这样高效的语言实现的，那么为什么不用 C++ 来写网页呢？实际上我认为从技术角度来说并不存在问题，直接下发 C++ 代码，然后交给 C++ 解释器去执行，再调用浏览器的 C++ 组件，似乎更加符合直觉一些。于是进行了一系列的调研工作：

## 历史原因

在互联网的发展初期，Web页面是静态的，主要用于信息的展示。随着技术的进步，人们开始渴望更丰富的用户交互和动态内容。这些需求催生了一种全新的编程语言：早期的Web：Web最初是由Tim Berners-Lee在1990年代初期发明的，当时Web页面是静态的，主要是用来展示信息。为了满足动态交互的需求，需要一种能在客户端运行的脚本语言。

1. JavaScript的诞生：1995年，Netscape的工程师Brendan Eich开发了一种名为Mocha（后改为LiveScript，最终改为JavaScript）的脚本语言。JavaScript被集成到Netscape Navigator浏览器中，允许网页开发者增加动态功能和交互性。

2. 标准化：为了对抗Netscape的市场主导地位，微软发布了自己的浏览器Internet Explorer，并且在其中集成了自己版本的脚本语言JScript。为了防止市场分裂，1997年，JavaScript被提交到了Ecma International，成为标准ECMA-262，也就是我们现在所说的ECMAScript。

3. 浏览器战争：在1990年代后期，Netscape Navigator和Internet Explorer之间的“浏览器战争”导致了许多Web技术的快速发展，JavaScript作为两个浏览器都支持的脚本语言，得到了快速的普及。

4. Web 2.0：2000年代中期，随着Ajax（异步JavaScript和XML）技术的普及，Web应用开始从静态页面向更加动态和交互式的“Web 2.0”时代迈进。JavaScript在这一进程中扮演了核心角色。

5. V8引擎的诞生与Node.js：2008年，Google发布了Chrome浏览器和V8 JavaScript引擎，后者大幅提升了JavaScript的性能。2009年，Ryan Dahl创建了Node.js，这是一个基于V8引擎的服务器端JavaScript运行时环境，使得JavaScript能够用于服务器端编程。

6. 现代框架和工具：随着Angular、React、Vue等现代前端框架的出现，以及Webpack、Babel等构建工具的发展，JavaScript的开发体验和能力得到了大幅提升，进一步巩固了其在Web开发中的地位。

7. 单页应用（SPA）：单页应用的兴起使得JavaScript变得更加重要，因为它能够提供更接近桌面应用的用户体验。

## JavaScript的运行时

不同于C或Python等语言，JavaScript被设计为运行在一个非常特殊的宿主环境中——浏览器。浏览器提供了JavaScript解释器，比如Chrome的V8引擎，可以解析并执行JavaScript代码。这意味着JavaScript的能力受到宿主环境的限制和扩展。例如，浏览器提供了DOM操作的接口，而这些并不是JavaScript语言内置的，而是宿主环境提供给JavaScript的功能。

进一步地，JavaScript在浏览器中通常不需要处理文件I/O等操作，因此它没有被设计为具备这些能力。然而，当JavaScript脱离了浏览器这个宿主环境，比如在Node.js中运行时，它就能够获得读写文件等后端语言的能力。

JavaScript执行效率的问题，通过引入JIT（Just-In-Time）编译技术得到了显著改善。JIT能够动态地将频繁执行的代码编译成机器码并缓存，以提高执行速度。但是，这种优化依赖于代码的稳定性，如果代码在不同上下文中行为不一致（如函数参数类型的变化），之前的优化就可能失效，导致去优化的开销，这限制了JIT技术的性能提升。

在这种情况下，WebAssembly应运而生。WebAssembly是一种二进制指令格式，它能够让C++等语言编写的程序编译成中间代码，并在浏览器中运行。这为使用多种语言编写Web应用打开了大门，理论上允许了C++等语言的直接使用。

那么，为何我们还是不用C++来开发网页呢？说白了其实就是高性能和易用性不可兼得。尽管C++能够提供更好的性能，但其复杂性和开发难度远远超出JavaScript。JavaScript的易用性、快速部署和广泛的社区支持，让它成为了开发Web应用的首选。即使有了WebAssembly这样的高性能替代品，JavaScript依然因为其易用性和生态系统的成熟保持着其在Web开发中不可动摇的地位。


## 对于跨语言的思考

由于绝大多数主流语言都是图灵完备的，也就是说一切可计算的问题，在这些语言层面都是等价的，都可以计算。那么制约语言能力的因素也就只剩下了运行时的环境是否提供了相应的功能。比如虽然浏览器中的 JavaScript 不能读写文件，不能实现一个服务器，但这是浏览器(即运行时环境)不行，不是 JavaScript 不行，只要把运行环境换成 Node.js 就行了。

编译器前端可以对多种语言进行词法分析和语法分析，并且生成一套语言无关的中间代码，因此理论上来说，如果某个编译器前端工具支持两个语言 A 和 B 的解析，那么 A 和 B 是可以互相转换的，流程如下:
A 源码 <–> 语言无关的中间代码 <–> B 源码

然而实现单纯语法的转换意义并不大。一方面，对于图灵完备的语言来说，换一种表示方法(语言)去解决相同的问题并没有意义。另一方面，语言的真正功能绝不仅仅是语法本身，而在于它的运行时环境提供了什么样的功能。比如Python语言是动态类型的，这意味着变量可以在运行时改变其类型。而Java是静态类型的，变量的类型在编译时就确定了，不能改变。因此，将Python代码转换为Java代码需要添加类型声明，并在运行时可能丢失Python的一些灵活性。

那么最后说到底很容易引入到我们老生常谈的一个话题，为什么会有这么多的编程语言呢？

我个人浅显的理解是，虽然现在有这么多编程语言，但是似乎没有哪一种编程语言能够解决所有的问题，就像在生活中有锤子、扳手等工具，就连人类沟通的语言都有成百种，不同的领域还有不同的交流语言，比如数学领域有数字符号，音乐领域有音符等。编程语言也是如此。





